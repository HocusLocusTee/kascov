pragma silverscript ^0.1.0;

contract OpenHashlock(
    bytes32 digest,   // sha256(secret) or blake2b(secret)
    bool useBlake2b
) {

    // Anyone can spend if they reveal the correct secret.
    // No restrictions on destination or output structure.
    entrypoint function claim(bytes secret) {

        if (useBlake2b) {
            require(blake2b(secret) == digest);
        } else {
            require(sha256(secret) == digest);
        }

    }
}
